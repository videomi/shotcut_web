---
layout: post
title: Multitrack Timeline
date: '2013-12-28T13:47:00.000-08:00'
author: Dan Dennedy
tags: 
categories:
- blog
---

<b>The new multitrack timeline is available as of version 13.12.28.</b><br>
<div class="separator" style="clear: both; text-align: left;"><a href="http://1.bp.blogspot.com/-JG0X6kANqP8/Ur8qzAX7hVI/AAAAAAAADIo/f1kzYOa6_rk/s1600/shotcut-timeline-13.12.28.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img alt="screenshot of Shotcut timeline v13.12.28" border="0" src="http://1.bp.blogspot.com/-JG0X6kANqP8/Ur8qzAX7hVI/AAAAAAAADIo/f1kzYOa6_rk/s1600/shotcut-timeline-13.12.28.jpg" height="306" title="" width="400"></a></div><br><a name='more'></a>
Please keep in mind that this is the first release of this feature. Most Shotcut development is done in the open, and this is not yet considered a ready feature. Still, it can be used to some degree of success if not expecting too much and being careful of some rough edges. Here is a quick list of what we have today:<br>
<ul><li>works on all platforms</li><li>the player/viewer now is now tabbed: Clip, Playlist, or Timeline</li><li>multiple tracks - audio only (green) or audio/video (blue) tracks</li><li>adjustable track height</li><li>menu and toolbar at the top left</li><li>ruler strip at the top with timecode</li><li>playhead</li><li>track headers at the left</li><li>tracks are named using a standard V2, V1, A1, A2, ... convention</li><li>tracks can be renamed</li><li>track headers have toggle buttons for mute, hide, and composite</li><li>right-click [C] button in track header to more easily understand and access composite option</li><li>zoom slider at bottom, left</li><li>zoom using keyboard shortcuts 0 (reset), - (zoom out),. and = (zoom in)</li><li>notion of a current track with background tinted yellow</li><li>change current track by clicking header, track background, or up/down cursor keys</li><li>track scrolling - manually or automatically while playing</li><li>scrubbing</li><ul><li>click on ruler or track background to seek to that point</li><li>drag on ruler or track background to scrub</li><li>hold down shift to scrub without having to drag (scim)</li><li>scrubbing at left &amp; right edges automatically scrolls as-needed</li></ul><li>thumbnails of in and out points of video with caching to storage between sessions</li><li>audio "waveforms" (technically, they are a graph of the audio level across all channels) with caching</li><li>notion of a selected clip, which is darkened</li><li>selecting a clip shows its filters in the filters panel</li><li>use menu at top left has to add an audio or video track</li><li>use menu at top left to close the timeline - both project and panel</li><li>all non-muted tracks mix audio</li><li>all non-hidden tracks can composite against a black background</li><li>append a clip to the current track via:</li><ul><li>click + button,</li><li>press C key when timeline has focus</li><li>drag-n-drop from player or playlist (currently broken on Windows and OS X)</li></ul><li>move a clip using drag-n-drop</li><li>trim clip in point by dragging its left edge (does not ripple)</li><li>trim clip out point by dragging its right edge (does not ripple)</li><li>snapping to edges of other clips and to the playhead<br>(hold Alt key to temporarily suspend snapping while dragging)</li><li>lift a clip: remove it without affecting position of other clips</li><ul><li>select it and click - button</li><li>select it and press backspace, delete, or Z key</li><li>right-click it and choose Lift from context menu</li></ul><li>remove a clip and the space it occupies causing all following clips on timeline to "ripple" to the left</li><ul><li>select it and shift+backspace or shift+delete</li><li>select it and press X key</li><li>right-click it and choose Remove from context menu</li></ul><li>remove the gap between clips: right-click and choose Remove from context menu</li><li>undo/redo integration</li><li>project/document integration - current project reflected in title bar, modified indicator and prompting to save a modified project before closing</li><li>saves as MLT XML</li><li>can be encoded</li></ul>
<h4>Not Done</h4>
<ul>
<li>(done) <strike>inserting tracks between existing tracks</strike></li>
<li>(done) <strike>removing tracks</strike></li>
<li>(done) <strike>transitions</strike></li>
<li>on-clip fader bars for audio and video levels</li>
<li>filter parameter key-framing</li>
<li>(done) <strike>insert and overwrite edits</strike></li>
<li>fancy editing modes like <strike>ripple</strike> (done), slip, slide, roll</li>
<li>(done) <strike>splitting and joining clips</strike></li>
<li>detach audio from video</li>
<li>(done) <strike>locking tracks</strike></li>
<li>multi-select clips</li>
<li>cut/copy/paste</li>
<li>(done) <strike>saving what is in the playlist when saving a multitrack project</strike> (When done, this will make the playlist like the "bin" in other programs.)</li>
<li>undo/redo integration for filters</li>
<li>dragging to trim should interactively crop the audio waveform (It is, however, cropped and redraw when released.)</li>
</ul>
<h4>Known Problems</h4><ul><li>(fixed) <strike>does not work with GPU processing</strike></li><li>(fixed) <strike>menus appear at wrong location in window on OS X</strike></li><li>(fixed) <strike>drag-n-drop from clip viewer or playlist only works on Linux</strike></li><li>(fixed) <strike>moving a clip causes some waveforms to disappear</strike></li><li>(improved) <strike>sometimes undo/redo causes timeline corruption</strike></li><li>sometimes thumbnails have incorrect aspect ratio</li><li>(fixed) <strike>You cannot dock ("put into a tab") the timeline with any other panels. In other words, do not try to stack the Filters panel along with the Timeline panel to switch between them using tabs. That does not work. If you accidentally do this, first un-tab everything so timeline is by itself. Then, using the View menu at the top, toggle the display of the timeline to hide and then show it. You can, however, place another panel at the bottom of the window <i>around</i> one of the <i>edges</i> of the timeline. For example, you can place the history view left of the timeline. We suggest docking the Filters panel in a tab at the top, left of the window along with Properties, Recent, and Playlist.</strike></li></ul>
<h4>For the Technically Curious</h4>
We tried to implement this using MLT and Qt as much as possible with the least amount of new code and redundant state as possible. Meaning, it uses MLT objects for the document object model and its API to manipulate it. Then, we use the Qt model/view framework to add a non-stateful hierarchical Qt model wrapper/adapter for the MLT objects. This is then exposed in a QML-based timeline view that uses Quick Repeater elements with its support for data models and data binding. As like the QML filter UIs, the QML code for the timeline is loaded from the filesystem instead of resources embedded into the binary executable to facilitate customization, tinkering, and contribution. However, the Shotcut C++ APIs it uses are not yet documented, and Shotcut does not provide a QML/JS console or object inspector as found in some web browsers.<br>
